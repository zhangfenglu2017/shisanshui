{
  "version": 3,
  "sources": [
    "unknown"
  ],
  "names": [],
  "mappings": "AAAA,IAAM,MAAM,GAAG,OAAO,CAAC,QAAQ,CAAC,CAAC;AACjC,IAAM,aAAa,GAAG,OAAO,CAAC,eAAe,CAAC,CAAC;AAC/C,IAAM,cAAc,GAAG,OAAO,CAAC,gBAAgB,CAAC,CAAC;AACjD,IAAM,eAAe,GAAG,OAAO,CAAC,iBAAiB,CAAC,CAAC;AACnD,IAAM,QAAQ,GAAG,OAAO,CAAC,UAAU,CAAC,CAAC;AACrC,IAAM,eAAe,GAAG,OAAO,CAAC,iBAAiB,CAAC,CAAC;AACnD,IAAM,MAAM,GAAG,OAAO,CAAC,QAAQ,CAAC,CAAC;AACjC,IAAM,YAAY,GAAG,OAAO,CAAC,cAAc,CAAC,CAAC;;AAE7C,EAAE,CAAC,KAAK,CAAC;AACL,eAAS,EAAE,CAAC,SAAS;;AAErB,cAAU,EAAE;AACR,oBAAY,EAAE,EAAE,CAAC,IAAI;AACrB,oBAAY,EAAE,EAAE,CAAC,IAAI;AACrB,uBAAe,EAAE,EAAE,CAAC,MAAM;AAC1B,wBAAgB,EAAE,EAAE,CAAC,IAAI;AACzB,oBAAY,EAAE,EAAE,CAAC,IAAI;AACrB,uBAAe,EAAE,EAAE,CAAC,IAAI;AACxB,sBAAc,EAAE,EAAE,CAAC,IAAI;;AAEvB,wBAAgB,EAAE,EAAE,CAAC,MAAM;AAC3B,sBAAc,EAAE,EAAE,CAAC,IAAI;AACvB,gBAAQ,EAAE,CAAC,EAAE,CAAC,IAAI,CAAC;AACnB,cAAM,EAAE,CAAC;AACT,sBAAc,EAAE,EAAE,CAAC,MAAM;;;;AAIzB,iBAAS,EAAE,IAAI;AACf,iBAAS,EAAE,IAAI;;AAEf,gCAAwB,EAAE;AACtB,mBAAO,EAAE,KAAK;AACd,uBAAS,SAAS;SACrB;;KAEJ;;;AAGD,UAAM,EAAE,kBAAY;AAChB,YAAI,CAAC,cAAc,CAAC,EAAE,CAAC,EAAE,CAAC,IAAI,CAAC,SAAS,CAAC,WAAW,EAAE,IAAI,CAAC,aAAa,EAAE,IAAI,CAAC,CAAC;AAChF,YAAI,CAAC,KAAK,EAAE,CAAC;AACb,YAAI,CAAC,gBAAgB,GAAG,KAAK,CAAC;AAC9B,YAAI,CAAC,eAAe,GAAG,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,YAAY,CAAC,MAAM,CAAC,CAAC,eAAe,CAAC;KAChF;;AAED,aAAS,EAAE,qBAAY;AACnB,YAAI,CAAC,cAAc,CAAC,GAAG,CAAC,EAAE,CAAC,IAAI,CAAC,SAAS,CAAC,WAAW,EAAE,IAAI,CAAC,aAAa,EAAE,IAAI,CAAC,CAAC;KACpF;;AAED,eAAW,EAAC,uBAAU;AAClB,YAAI,MAAM,GAAG,MAAM,CAAC,QAAQ,CAAC,QAAQ,CAAC,EAAE,CAAC;AACzC,YAAI,OAAO,GAAG,IAAI,CAAC,SAAS,CAAC,EAAE,CAAC;AAChC,cAAM,CAAC,UAAU,CAAC,OAAO,EAAC,MAAM,CAAC,CAAC;KACrC;;AAED,iBAAa,EAAE,yBAAY;;KAE1B;;AAED,SAAK,EAAE,iBAAY;AACf,YAAI,CAAC,YAAY,CAAC,MAAM,GAAG,KAAK,CAAC;AACjC,YAAI,CAAC,eAAe,CAAC,MAAM,GAAG,KAAK,CAAC;AACpC,YAAI,CAAC,gBAAgB,CAAC,MAAM,GAAG,KAAK,CAAC;AACrC,YAAI,CAAC,YAAY,CAAC,MAAM,GAAG,KAAK,CAAC;AACjC,YAAI,CAAC,cAAc,CAAC,MAAM,GAAG,KAAK,CAAC;AACnC,YAAI,CAAC,cAAc,CAAC,iBAAiB,EAAE,CAAC;AACxC,YAAI,CAAC,cAAc,CAAC,QAAQ,CAAC,OAAO,CAAC,UAAS,IAAI,EAAC;AAAC,gBAAI,CAAC,MAAM,GAAG,KAAK,CAAC;SAAC,CAAC,CAAC;AAC3E,YAAG,IAAI,CAAC,QAAQ,CAAC,MAAM,GAAG,CAAC,EAAE,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,UAAS,IAAI,EAAC;AAAC,gBAAG,IAAI,EAAE,IAAI,CAAC,MAAM,GAAG,KAAK,CAAC;SAAC,CAAC,CAAC;AAClG,YAAI,CAAC,gBAAgB,CAAC,YAAY,CAAC,cAAc,CAAC,CAAC,KAAK,EAAE,CAAC;AAC3D,YAAI,CAAC,gBAAgB,CAAC,YAAY,CAAC,cAAc,CAAC,CAAC,sBAAsB,EAAE,CAAC;KAC/E;;;AAGD,UAAM,EAAE,kBAAY;AAChB,YAAI,CAAC,YAAY,CAAC,MAAM,GAAG,KAAK,CAAC;AACjC,YAAI,CAAC,eAAe,CAAC,MAAM,GAAG,KAAK,CAAC;AACpC,YAAI,CAAC,YAAY,CAAC,MAAM,GAAG,KAAK,CAAC;AACjC,YAAI,CAAC,cAAc,CAAC,MAAM,GAAG,KAAK,CAAC;AACnC,YAAI,CAAC,cAAc,CAAC,iBAAiB,EAAE,CAAC;AACxC,YAAI,CAAC,cAAc,CAAC,QAAQ,CAAC,OAAO,CAAC,UAAS,IAAI,EAAC;AAAC,gBAAI,CAAC,MAAM,GAAG,KAAK,CAAC;SAAC,CAAC,CAAC;AAC3E,YAAG,IAAI,CAAC,QAAQ,CAAC,MAAM,GAAG,CAAC,EAAE,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,UAAS,IAAI,EAAC;AAAC,gBAAG,IAAI,EAAE,IAAI,CAAC,MAAM,GAAG,KAAK,CAAC;SAAC,CAAC,CAAC;;;KAGrG;;;AAGD,2BAAuB,EAAE,iCAAU,KAAK,EAAE;AACtC,YAAI,IAAI,GAAG,KAAK,CAAC,IAAI,CAAC,CAAA,UAAU,CAAC,EAAE;AAC/B,mBAAO,IAAI,CAAC,MAAM,IAAI,CAAC,CAAC,EAAE,CAAC;SAC9B,CAAA,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;;AAEd,YAAI,CAAC,cAAc,CAAC,IAAI,CAAC,CAAC;KAC7B;AACD,cAAU,EAAC,oBAAS,OAAO,EAAE,KAAK,EAAC;AAC/B,YAAG,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,EAAC;AACjB,mBAAO;SACV;AACD,YAAG,KAAK,GAAC,CAAC,EAAC;AACP,gBAAI,CAAC,YAAY,CAAC,YAAY,CAAC,UAAU,CAAC,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC;SAC/D,MAAI;AACD,gBAAG,OAAO,EAAC;AACP,oBAAI,CAAC,YAAY,CAAC,YAAY,CAAC,UAAU,CAAC,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC;aAC/D,MAAI;AACD,oBAAI,CAAC,YAAY,CAAC,YAAY,CAAC,UAAU,CAAC,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC;aAC9D;SACJ;KACJ;AACD,kBAAc,EAAE,wBAAU,IAAI,EAAE;AAC5B,YAAI,CAAC,SAAS,GAAG,IAAI,CAAC;AACtB,YAAI,CAAC,IAAI,CAAC,MAAM,GAAI,IAAI,IAAI,IAAI,AAAC,CAAC;AAClC,YAAI,CAAC,YAAY,CAAC,MAAM,GAAG,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC;AAC5C,YAAI,CAAC,IAAI,EAAE;AACP,mBAAO;SACV;;AAED,YAAI,QAAQ,GAAG,IAAI,CAAC,YAAY,CAAC,YAAY,CAAC,UAAU,CAAC,CAAC;AAC1D,gBAAQ,CAAC,YAAY,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;AACtC,gBAAQ,CAAC,YAAY,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;AAC/B,gBAAQ,CAAC,cAAc,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;AACvC,gBAAQ,CAAC,iBAAiB,CAAC,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;;;;;;;;;AAS/C,YAAM,MAAM,GAAG,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC;AACrC,YAAI,IAAI,CAAC,SAAS,IAAI,MAAM,GAAG,CAAC,IAAK,IAAI,CAAC,wBAAwB,CAAC,OAAO,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,AAAC,EAAE;AACvF,gBAAI,eAAe,CAAC,aAAa,CAAC,IAAI,CAAC,EAAE;AACrC,oBAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,EAAE,EAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;AACrC,oBAAI,CAAC,gBAAgB,CAAC,YAAY,CAAC,cAAc,CAAC,CAAC,cAAc,CAAC,IAAI,CAAC,CAAC;aAC3E;SACJ;;KAEJ;;;AAGD,gBAAY,EAAE,wBAAW;AACrB,YAAI,YAAY,GAAG,IAAI,CAAC,YAAY,CAAC,YAAY,CAAC,UAAU,CAAC,CAAC;AAC9D,YAAI,CAAC,IAAI,CAAC,SAAS,EAAE;AACjB,wBAAY,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC;AAChC,mBAAO;SACV;;AAED,YAAI,QAAQ,GAAG,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,SAAS,CAAC,QAAQ,GAAG,KAAK,CAAC;AAChE,oBAAY,CAAC,WAAW,CAAC,QAAQ,CAAC,CAAC;KACtC;;AAED,qBAAiB,EAAE,2BAAU,QAAQ,EAAkB;YAAhB,OAAO,yDAAG,IAAI;;AACjD,YAAI,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,EAAE;AACnB,mBAAO;SACV;AACD,YAAI,IAAI,CAAC,SAAS,CAAC,EAAE,IAAI,QAAQ,EAAE;AAC/B,gBAAI,CAAC,YAAY,CAAC,YAAY,CAAC,UAAU,CAAC,CAAC,qBAAqB,CAAC,OAAO,CAAC,CAAC;SAC7E;KACJ;;;;;;;AAOD,eAAW,EAAE,qBAAS,KAAK,EAAE;AACzB,YAAI,CAAC,KAAK,IAAI,IAAI,CAAC,SAAS,EAAE;AAC1B,iBAAK,GAAG,IAAI,CAAC,SAAS,CAAC,UAAU,CAAC;SACrC;;AAED,YAAI,QAAQ,GAAG,IAAI,CAAC,YAAY,CAAC,YAAY,CAAC,UAAU,CAAC,CAAC;AAC1D,gBAAQ,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC;KAC/B;;AAED,mBAAe,EAAE,yBAAU,MAAM,EAAkB;YAAhB,OAAO,yDAAG,IAAI;;AAC7C,YAAI,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,EAAE;AACnB,mBAAO;SACV;;AAED,YAAI,IAAI,CAAC,SAAS,CAAC,EAAE,IAAI,MAAM,EAAE;AAC7B,gBAAI,CAAC,YAAY,CAAC,YAAY,CAAC,UAAU,CAAC,CAAC,mBAAmB,CAAC,OAAO,CAAC,CAAC;SAC3E;KACJ;AACD,aAAS,EAAC,mBAAS,MAAM,EAAC,EAAE,EAAC;AACzB,YAAG,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,EAAC;AACjB,mBAAO;SACV;AACD,YAAI,IAAI,CAAC,SAAS,CAAC,EAAE,IAAI,MAAM,EAAE;AAC5B,gBAAI,CAAC,YAAY,CAAC,YAAY,CAAC,UAAU,CAAC,CAAC,aAAa,CAAC,EAAE,CAAC,CAAC;SACjE;KACJ;;;;AAID,kBAAc,EAAE,wBAAU,QAAQ,EAAE;AAChC,YAAI,CAAC,SAAS,GAAG,QAAQ,CAAC;;AAE1B,YAAI,QAAQ,IAAI,CAAC,QAAQ,CAAC,QAAQ,EAAE;AAChC,gBAAI,CAAC,KAAK,EAAE,CAAC;SAChB;KACJ;;;AAGD,mBAAe,EAAE,2BAAY;AACzB,YAAI,CAAC,YAAY,CAAC,YAAY,CAAC,UAAU,CAAC,CAAC,mBAAmB,CAAC,KAAK,CAAC,CAAC;KACzE;;AAED,sBAAkB,EAAE,8BAAY;AAC5B,YAAI,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,EAAE;AACnB,mBAAO;SACV;AACD,YAAI,eAAe,CAAC,aAAa,CAAC,IAAI,CAAC,SAAS,CAAC,EAAE;AAC/C,mBAAO;SACV;AACD,YAAI,SAAS,GAAG,IAAI,CAAC,eAAe,CAAC,YAAY,CAAC,WAAW,CAAC,CAAC;AAC/D,iBAAS,CAAC,iBAAiB,EAAE,CAAC;KACjC;;AAED,4BAAwB,EAAE,oCAAY;AAClC,eAAO,eAAe,CAAC,aAAa,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;KACxD;;AAED,uBAAmB,EAAE,6BAAU,MAAM,EAAc;YAAZ,MAAM,yDAAG,CAAC;;AAC7C,YAAI,MAAM,IAAI,IAAI,CAAC,MAAM,EAAE;AACvB,mBAAO;SACV;;AAED,YAAI,QAAQ,GAAG,IAAI,CAAC,YAAY,CAAC,YAAY,CAAC,UAAU,CAAC,CAAC;AAC1D,gBAAQ,CAAC,iBAAiB,CAAC,MAAM,IAAI,CAAC,CAAC,CAAC;KAC3C;;AAED,gBAAY,EAAE,sBAAU,MAAM,EAAE,OAAO,EAAE;AACrC,YAAI,MAAM,IAAI,IAAI,CAAC,MAAM,EAAE;AACvB,mBAAO;SACV;;AAED,YAAI,WAAW,GAAG,IAAI,CAAC,eAAe,CAAC,YAAY,CAAC,aAAa,CAAC,CAAC;AACnE,mBAAW,CAAC,SAAS,CAAC,OAAO,CAAC,CAAC;KAClC;;;AAGD,YAAQ,EAAE,kBAAU,MAAM,EAAC,QAAQ,EAAE;AACjC,YAAI,IAAI,CAAC,MAAM,IAAI,MAAM,EAAE;AACvB,mBAAO;SACV;;AAED,YAAI,CAAC,eAAe,CAAC,IAAI,CAAC,MAAM,GAAG,KAAK,CAAC;AACzC,YAAI,CAAC,gBAAgB,CAAC,MAAM,GAAG,KAAK,CAAC;AACrC,YAAI,CAAC,YAAY,CAAC,SAAS,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;AAC/C,YAAI,CAAC,YAAY,CAAC,MAAM,GAAG,IAAI,CAAC;AAChC,YAAI,CAAC,YAAY,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC,EAAC,CAAC,CAAC,CAAC,OAAO,CAAC,CAAA,UAAS,IAAI,EAAC;AACxD,gBAAI,CAAC,MAAM,GAAG,IAAI,CAAC;AACnB,gBAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,CAAA,UAAS,GAAG,EAAC;AAC/B,mBAAG,CAAC,MAAM,GAAG,IAAI,CAAC;;AAElB,oBAAI,UAAU,GAAG,GAAG,CAAC,YAAY,CAAC,WAAW,CAAC,CAAC;;AAE/C,oBAAI,IAAI,GAAG,4BAA4B,CAAC;;AAExC,oBAAI,CAAC,cAAc,CAAC,IAAI,CAAC,eAAe,EAAE,IAAI,EAAE,UAAU,CAAC,CAAC;aAE/D,CAAA,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;SACjB,CAAA,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;AACd,YAAI,CAAC,YAAY,CAAC,EAAE,CAAC,EAAE,CAAC,IAAI,CAAC,SAAS,CAAC,SAAS,EAAE,CAAA,UAAU,KAAK,EAAE;AAC/D,gBAAI,CAAC,kBAAkB,CAAC,KAAK,CAAC,CAAC;SAClC,CAAA,CAAC,IAAI,CAAC,IAAI,CAAC,EAAC,IAAI,CAAC,YAAY,CAAC,CAAC;KAGnC;;AAED,sBAAkB,EAAE,4BAAU,KAAK,EAAE;;AAEjC,YAAI,IAAI,CAAC,MAAM,IAAI,MAAM,CAAC,QAAQ,CAAC,QAAQ,CAAC,EAAE,EAAE,OAAO;;AAEvD,YAAI,QAAQ,GAAG,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,MAAM,IAAI,CAAC,GAAE,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,KAAK,GAAE,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC;;AAE9G,YAAI,KAAK,GAAG,QAAQ,CAAC,GAAG,CAAC,CAAA,UAAU,YAAY,EAAE;;AAE7C,gBAAG,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,MAAM,IAAI,CAAC,EAAE,OAAO,MAAM,CAAC,cAAc,CAAC,YAAY,CAAC,CAAC;;AAEnF,mBAAO,MAAM,CAAC,cAAc,CAAC,YAAY,CAAC,KAAK,CAAC,CAAC;SAEpD,CAAA,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,MAAM,CAAC,UAAU,KAAK,EAAE,QAAQ,EAAE;AAAC,mBAAO,KAAK,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC;SAAC,EAAE,EAAE,CAAC,CAAC;;AAEtF,YAAI,YAAY,GAAG,IAAI,CAAC,YAAY,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC,EAAC,CAAC,CAAC,CAAC;;AAEzD,YAAI,KAAK,GAAG,YAAY,CAAC,GAAG,CAAC,UAAU,IAAI,EAAE;AAAC,mBAAO,IAAI,CAAC,QAAQ,CAAC;SAAC,CAAC,CAAC,MAAM,CAAC,UAAU,KAAK,EAAE,GAAG,EAAE;AAAC,mBAAO,KAAK,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;SAAC,EAAE,EAAE,CAAC,CAAC;;AAEpI,aAAK,CAAC,OAAO,CAAC,CAAA,UAAU,MAAM,EAAE,KAAK,EAAE;;AAEnC,gBAAI,KAAK,IAAI,KAAK,CAAC,MAAM,EAAE,OAAO;;AAElC,iBAAK,CAAC,KAAK,CAAC,CAAC,iBAAiB,EAAE,CAAC;;AAEjC,iBAAK,CAAC,KAAK,CAAC,CAAC,YAAY,CAAC,EAAE,CAAC,MAAM,CAAC,CAAC,WAAW,GAAG,EAAE,CAAC;;AAEtD,gBAAI,MAAM,GAAG,IAAI,EAAE,CAAC,IAAI,EAAE,CAAC;;AAE3B,kBAAM,CAAC,KAAK,GAAG,KAAK,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC;;AAE9B,kBAAM,CAAC,MAAM,GAAG,KAAK,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC;;AAEhC,kBAAM,CAAC,YAAY,CAAC,EAAE,CAAC,MAAM,CAAC,CAAC;;AAE/B,gBAAI,UAAU,GAAG,MAAM,CAAC,YAAY,CAAC,WAAW,CAAC,CAAC;;AAElD,sBAAU,CAAC,QAAQ,GAAG,CAAC,CAAC;;AAExB,gBAAI,QAAQ,GAAG,IAAI,CAAC,gBAAgB,IAAI,KAAK,GAAE,MAAM,CAAC,QAAQ,EAAE,GAAE,MAAM,CAAC;;AAEzE,kBAAM,CAAC,QAAQ,GAAG,QAAQ,CAAC;;AAE3B,gBAAI,IAAI,GAAG,wBAAwB,GAAE,QAAQ,CAAC;;AAE9C,gBAAI,CAAC,cAAc,CAAC,IAAI,CAAC,eAAe,EAAE,IAAI,EAAE,UAAU,CAAC,CAAC;;AAE5D,gBAAG,EAAE,CAAC,KAAK,IAAI,QAAQ,EAAC;;AAEpB,oBAAI,KAAK,GAAG,IAAI,EAAE,CAAC,IAAI,EAAE,CAAC;;AAE1B,qBAAK,CAAC,YAAY,CAAC,EAAE,CAAC,MAAM,CAAC,CAAC;;AAE9B,kBAAE,CAAC,MAAM,CAAC,OAAO,CAAC,sBAAsB,EAAE,EAAE,CAAC,WAAW,EAAE,CAAA,UAAU,GAAG,EAAE,WAAW,EAAE;;AAElF,wBAAI,GAAG,EAAE;AAAC,0BAAE,CAAC,KAAK,CAAC,GAAG,CAAC,OAAO,IAAI,GAAG,CAAC,CAAC,OAAO;qBAAC;;AAE/C,wBAAI,UAAU,GAAG,KAAK,CAAC,YAAY,CAAC,EAAE,CAAC,MAAM,CAAC,CAAC;;AAE/C,8BAAU,CAAC,WAAW,GAAG,WAAW,CAAC;;AAErC,8BAAU,CAAC,IAAI,CAAC,KAAK,GAAG,UAAU,CAAC,IAAI,CAAC,KAAK,GAAG,EAAE,CAAC;;AAEnD,8BAAU,CAAC,IAAI,CAAC,MAAM,GAAG,UAAU,CAAC,IAAI,CAAC,MAAM,GAAG,EAAE,CAAC;iBAExD,CAAA,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;;AAEd,0BAAU,CAAC,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC;aAEnC;;AAED,iBAAK,CAAC,KAAK,CAAC,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC;SACjC,CAAA,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;;AAEd,YAAI,MAAM,GAAG,KAAK,CAAC,KAAK,CAAC,CAAC,EAAC,CAAC,CAAC,CAAA;AAC7B,YAAI,MAAM,GAAG,KAAK,CAAC,KAAK,CAAC,CAAC,EAAC,CAAC,CAAC,CAAA;AAC7B,YAAI,MAAM,GAAG,KAAK,CAAC,KAAK,CAAC,CAAC,EAAC,EAAE,CAAC,CAAA;;AAE9B,aAAK,GAAG,CAAC,MAAM,EAAE,MAAM,EAAE,MAAM,CAAC,CAAA;;AAEhC,YAAI,SAAS,GAAG,MAAM,CAAC,SAAS,CAAC,MAAM,CAAC,GAAC,CAAC,CAAC;AAC3C,iBAAS,GAAG,SAAS,IAAE,EAAE,GAAG,SAAS,GAAE,GAAG,GAAC,SAAS,CAAC;AACrD,iBAAS,GAAG,SAAS,IAAE,IAAI,GAAG,IAAI,GAAE,SAAS,CAAC;;;AAG9C,YAAI,SAAS,GAAG,MAAM,CAAC,SAAS,CAAC,MAAM,CAAC,GAAC,CAAC,CAAC;AAC3C,iBAAS,GAAG,SAAS,IAAE,EAAE,GAAG,SAAS,GAAE,GAAG,GAAC,SAAS,CAAC;AACrD,iBAAS,GAAG,SAAS,IAAE,IAAI,GAAG,IAAI,GAAE,SAAS,CAAC;;;AAG9C,YAAI,SAAS,GAAG,MAAM,CAAC,SAAS,CAAC,MAAM,CAAC,GAAC,CAAC,CAAC;AAC3C,iBAAS,GAAG,SAAS,IAAE,EAAE,GAAG,SAAS,GAAE,GAAG,GAAC,SAAS,CAAC;;AAGrD,YAAG,SAAS,EAAE,MAAM,CAAC,WAAW,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,SAAS,EAAE,KAAK,EAAE,KAAK,EAAE,IAAI,CAAC,eAAe,CAAC,CAAC;AACzF,YAAG,SAAS,EAAE,MAAM,CAAC,WAAW,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,SAAS,EAAE,KAAK,EAAE,KAAK,EAAE,IAAI,CAAC,eAAe,CAAC,CAAC;AACzF,YAAG,SAAS,EAAE,MAAM,CAAC,WAAW,CAAC,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,SAAS,EAAE,KAAK,EAAE,KAAK,EAAE,IAAI,CAAC,eAAe,CAAC,CAAC;AAC1F,YAAG,IAAI,CAAC,gBAAgB,IAAI,KAAK,EAAC;AAC9B,gBAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC;SAChC,MACI,IAAG,IAAI,CAAC,gBAAgB,IAAI,IAAI,EAAC;AAClC,gBAAI,CAAC,gBAAgB,GAAG,KAAK,CAAC;SACjC;KAEJ;;AAED,kBAAc,EAAE,wBAAS,WAAW,EAAE,IAAI,EAAE,WAAW,EAAE,CAAC,EAAE,CAAC,EAAE;;AAE3D,YAAI,MAAM,GAAG,WAAW,CAAC,cAAc,CAAE,IAAI,CAAE,CAAC;;AAEhD,mBAAW,CAAC,WAAW,GAAG,MAAM,CAAC;;AAEjC,YAAG,CAAC,EAAE,WAAW,CAAC,IAAI,CAAC,KAAK,GAAG,CAAC,CAAC;;AAEjC,YAAG,CAAC,EAAE,WAAW,CAAC,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC;KACrC;;;;;;;;;;;;;;;;;;AAkBD,uBAAmB,EAAE,+BAAY;AAC7B,YAAI,CAAC,YAAY,CAAC,SAAS,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;AAC/C,YAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC;AAC7B,YAAI,CAAC,kBAAkB,EAAE,CAAC;AAC1B,YAAI,CAAC,eAAe,CAAC,IAAI,CAAC,MAAM,GAAG,KAAK,CAAC;AACzC,YAAI,CAAC,gBAAgB,CAAC,MAAM,GAAG,IAAI,CAAC;AACpC,YAAI,CAAC,YAAY,CAAC,MAAM,GAAG,IAAI,CAAC;AAChC,YAAG,IAAI,CAAC,gBAAgB,CAAC,YAAY,CAAC,cAAc,CAAC,CAAC,KAAK,EAAC;AACxD,gBAAG,IAAI,CAAC,gBAAgB,CAAC,YAAY,CAAC,cAAc,CAAC,CAAC,KAAK,CAAC,cAAc,EAAC;AACvE,oBAAI,CAAC,YAAY,CAAC,MAAM,GAAG,IAAI,CAAC;aACnC,MAAI;AACD,oBAAI,CAAC,YAAY,CAAC,MAAM,GAAG,KAAK,CAAC;aACpC;SACJ;KACJ;;;;;AAKD,sBAAkB,EAAE,4BAAU,MAAM,EAAE,WAAW,EAAE;AAC/C,YAAI,MAAM,IAAI,IAAI,CAAC,MAAM,EAAE;AACvB,mBAAO;SACV;AACD,YAAI,QAAQ,GAAG,IAAI,CAAC,QAAQ,CAAC,WAAW,CAAC,CAAC;AAC1C,gBAAQ,CAAC,MAAM,GAAG,IAAI,CAAC;AACvB,gBAAQ,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,MAAM,GAAG,IAAI,CAAC;AACnC,gBAAQ,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,MAAM,GAAG,IAAI,CAAC;;;AAGnC,YAAI,QAAQ,GAAG,EAAE,CAAC,QAAQ,CAAC,GAAG,EAAC,CAAC,EAAE,CAAC,CAAC;AACpC,YAAI,MAAM,GAAG,EAAE,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC;AAC/B,YAAI,SAAS,GAAG,EAAE,CAAC,QAAQ,CAAC,GAAG,EAAC,CAAC,CAAC,CAAC;AACnC,YAAI,WAAW,GAAG,EAAE,CAAC,QAAQ,CAAC,YAAU;AAAC,oBAAQ,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,MAAM,GAAG,IAAI,CAAC;SAAC,CAAC,CAAC;AAC/E,YAAI,SAAS,GAAG,EAAE,CAAC,QAAQ,CAAC,YAAU;AAAC,oBAAQ,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,MAAM,GAAG,KAAK,CAAC;SAAC,CAAC,CAAC;AAC9E,YAAI,MAAM,GAAG,EAAE,CAAC,MAAM,CAAC,EAAE,CAAC,QAAQ,CAAC,WAAW,EAAE,QAAQ,EAAE,MAAM,EAAE,SAAS,EAAE,SAAS,CAAC,EAAC,CAAC,CAAC,CAAC;;;AAG3F,YAAI,MAAM,GAAG,EAAE,CAAC,MAAM,CAAE,CAAC,CAAC,CAAC;AAC3B,YAAI,QAAQ,GAAG,EAAE,CAAC,OAAO,CAAE,CAAC,EAAE,GAAG,CAAC,CAAC;AACnC,YAAI,QAAQ,GAAG,EAAE,CAAC,OAAO,CAAE,IAAI,EAAE,CAAC,CAAC,CAAC;AACpC,YAAI,iBAAiB,GAAG,EAAE,CAAC,KAAK,CAAC,EAAE,CAAC,OAAO,CAAC,IAAI,CAAC,EAAE,EAAE,CAAC,OAAO,CAAC,IAAI,EAAE,GAAG,CAAC,CAAC,CAAC;AAC1E,YAAI,MAAM,GAAG,EAAE,CAAC,SAAS,CAAC,EAAE,CAAC,CAAC;AAC9B,YAAI,WAAW,GAAG,EAAE,CAAC,QAAQ,CAAC,YAAU;AAAC,oBAAQ,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,MAAM,GAAG,IAAI,CAAC;SAAC,CAAC,CAAC;AAC/E,YAAI,SAAS,GAAG,EAAE,CAAC,QAAQ,CAAC,YAAU;AAAC,oBAAQ,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,MAAM,GAAG,KAAK,CAAC;SAAC,CAAC,CAAC;AAC9E,YAAI,OAAO,GAAI,EAAE,CAAC,MAAM,CAAC,EAAE,CAAC,QAAQ,CAAC,WAAW,EAAE,MAAM,EAAE,QAAQ,EAAE,QAAQ,EAAE,iBAAiB,EAAE,MAAM,EAAE,SAAS,CAAC,EAAC,CAAC,CAAC,CAAC;;AAEvH,gBAAQ,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC;AACvC,gBAAQ,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC,OAAO,CAAC,CAAC;;;;KAK3C;;;AAGD,2BAAuB,EAAE,iCAAU,MAAM,EAAE;AACvC,YAAI,MAAM,IAAI,IAAI,CAAC,MAAM,EAAE;AACvB,mBAAO;SACV;;AAED,YAAI,CAAC,cAAc,CAAC,MAAM,GAAG,IAAI,CAAC;;AAElC,YAAI,cAAc,GAAG,EAAE,CAAC,WAAW,CAAC,IAAI,CAAC,gBAAgB,CAAC,CAAC;;AAE3D,sBAAc,CAAC,QAAQ,CAAC,OAAO,CAAC,CAAA,UAAS,IAAI,EAAC;AAAC,gBAAI,CAAC,MAAM,GAAG,KAAK,CAAC;SAAC,CAAA,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;;AAEjF,sBAAc,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;;AAEjC,YAAI,CAAC,cAAc,CAAC,QAAQ,CAAC,cAAc,CAAC,CAAC;;AAE7C,YAAI,QAAQ,GAAG,GAAG,CAAC;;AAEnB,YAAI,QAAQ,GAAG,CAAC,CAAC;;AAEjB,sBAAc,CAAC,QAAQ,CAAC,OAAO,CAAC,CAAA,UAAS,IAAI,EAAC;;AAE1C,gBAAI,CAAC,YAAY,CAAC,YAAW;;AAEzB,4BAAY,CAAC,QAAQ,CAAC,eAAe,EAAE,CAAC;;AAExC,oBAAI,CAAC,MAAM,GAAG,IAAI,CAAC;;AAEnB,oBAAI,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,MAAM,EAAE,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;;AAEhD,iBAAC,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,MAAM,EAAE,GAAC,EAAE,CAAC,GAAG,CAAC,CAAC;;AAErC,oBAAI,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,MAAM,EAAE,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;;AAEhD,iBAAC,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,MAAM,EAAE,GAAC,EAAE,CAAC,GAAG,CAAC,CAAC;;AAErC,oBAAI,CAAC,CAAC,GAAG,CAAC,CAAC;;AAEX,oBAAI,CAAC,CAAC,GAAG,CAAC,CAAC;aAEd,EAAE,QAAQ,CAAC,CAAC;;AAEb,oBAAQ,GAAG,QAAQ,GAAG,QAAQ,CAAC;SAElC,CAAA,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;KAEjB;;;AAGD,uBAAmB,EAAE,6BAAU,MAAM,EAAE;AACnC,YAAI,MAAM,IAAI,IAAI,CAAC,MAAM,EAAE;AACvB,mBAAO;SACV;;AAED,YAAI,QAAQ,GAAG,IAAI,CAAC,YAAY,CAAC,YAAY,CAAC,UAAU,CAAC,CAAC;AAC1D,gBAAQ,CAAC,mBAAmB,EAAE,CAAC;KAClC;;AAED,sBAAkB,EAAE,4BAAU,MAAM,EAAE;AAClC,YAAI,MAAM,IAAI,IAAI,CAAC,MAAM,EAAE;AACvB,mBAAO;SACV;;AAED,YAAI,QAAQ,GAAG,IAAI,CAAC,YAAY,CAAC,YAAY,CAAC,UAAU,CAAC,CAAC;AAC1D,gBAAQ,CAAC,kBAAkB,EAAE,CAAC;KACjC;;AAED,oBAAgB,EAAE,4BAAY;AAC1B,YAAI,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,EAAE;AACnB,mBAAO,CAAC,CAAC;SACZ;;AAED,YAAI,KAAK,GAAG,IAAI,CAAC,gBAAgB,CAAC,YAAY,CAAC,cAAc,CAAC,CAAC,gBAAgB,EAAE,CAAC;AAClF,eAAO,KAAK,CAAC;KAChB;;AAED,wBAAoB,EAAE,gCAAY;AAC9B,YAAI,IAAI,CAAC,gBAAgB,EAAE,IAAI,CAAC,EAAE;AAC9B,mBAAO;SACV;AACD,YAAI,CAAC,YAAY,CAAC,MAAM,GAAG,KAAK,CAAC;AACjC,YAAI,CAAC,gBAAgB,CAAC,YAAY,CAAC,cAAc,CAAC,CAAC,aAAa,EAAE,CAAC;KACtE;;AAED,uBAAmB,EAAE,6BAAU,KAAK,EAAE;AAClC,YAAI,IAAI,GAAG,KAAK,CAAC,IAAI,CAAC,CAAA,UAAU,CAAC,EAAE;AAC/B,mBAAO,IAAI,CAAC,MAAM,IAAI,CAAC,CAAC,EAAE,CAAC;SAC9B,CAAA,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;AACd,YAAI,CAAC,gBAAgB,CAAC,YAAY,CAAC,cAAc,CAAC,CAAC,cAAc,CAAC,IAAI,CAAC,CAAC;AACxE,YAAI,CAAC,gBAAgB,CAAC,YAAY,CAAC,cAAc,CAAC,CAAC,YAAY,EAAE,CAAC;;AAElE,YAAI,CAAC,WAAW,CAAC,IAAI,CAAC,SAAS,CAAC,UAAU,IAAI,CAAC,CAAC,CAAC;KACpD;;AAED,wBAAoB,EAAE,8BAAU,cAAc,EAAE;AAC5C,YAAI,CAAC,gBAAgB,CAAC,YAAY,CAAC,cAAc,CAAC,CAAC,oBAAoB,CAAC,cAAc,CAAC,CAAC;KAC3F;;AAED,mBAAe,EAAE,2BAAY;AACzB,YAAI,CAAC,gBAAgB,CAAC,YAAY,CAAC,cAAc,CAAC,CAAC,eAAe,EAAE,CAAC;KACxE;CACJ,CAAC,CAAC",
  "file": "unknown",
  "sourcesContent": [
    "const Socket = require('socket');\r\nconst KQGlobalEvent = require('KQGlobalEvent');\r\nconst ArrayExtension = require('ArrayExtension');\r\nconst UserModelHelper = require('UserModelHelper');\r\nconst Playback = require('Playback');\r\nconst KQCardResHelper = require('KQCardResHelper');\r\nconst KQCard = require('KQCard');\r\nconst AudioManager = require('AudioManager');\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        foldCardNode: cc.Node,      // 牌盖着时的样子\r\n        teShuPaiNode: cc.Node,      // 特殊牌盖着时的样子\r\n        cardsBackLayout: cc.Layout, // 13张牌背影，可用来展示发牌动画 含 cardsBack Component\r\n        compareCardsNode: cc.Node,  // compareCards   含 CompareCards Component\r\n        userInfoNode: cc.Node,          // 包含用户信息 含 userInfo Component\r\n        chatMessageNode: cc.Node,       // 聊天消息 包含 ChatMessage Component\r\n        userAvatarNode: cc.Node,\r\n        //userSampleInfoNode: cc.Node,\r\n        bulletHolePrefab: cc.Prefab,//中枪\r\n        bulletHoleNode: cc.Node,//中枪\r\n        shotNode: [cc.Node],//打枪\r\n        userId: 0,\r\n        cardTypePrefab: cc.Prefab,\r\n        // 用户信息\r\n        // 1、 如果 包含：cardInfo:[]，表明用户已经出牌\r\n        //\r\n        _userInfo: null,\r\n        _deskInfo: null,\r\n        /**/\r\n        playedCompareCardsIndexs: {\r\n            visible: false,\r\n            default: undefined,\r\n        }\r\n        /**/\r\n    },\r\n\r\n    // use this for initialization\r\n    onLoad: function () {\r\n        this.userAvatarNode.on(cc.Node.EventType.TOUCH_START, this._showUserInfo, this);\r\n        this.reset();\r\n        this.foldCardNodeBack = false;//判断是否点击了拍的背影\r\n        this.cardSpriteAtlas = this.node.parent.getComponent('play').cardSpriteAtlas;\r\n    },\r\n\r\n    onDestroy: function () {\r\n        this.userAvatarNode.off(cc.Node.EventType.TOUCH_START, this._showUserInfo, this);\r\n    },\r\n\r\n    click_leave:function(){\r\n        var userid = Socket.instance.userInfo.id;\r\n        var leaveId = this._userInfo.id;\r\n        Socket.sendQingli(leaveId,userid);\r\n    },\r\n    \r\n    _showUserInfo: function () {\r\n        //this.userSampleInfoNode.getComponent('UserSampleInfo').updateWithUser(this._userInfo);\r\n    },\r\n\r\n    reset: function () {\r\n        this.foldCardNode.active = false;\r\n        this.cardsBackLayout.active = false;\r\n        this.compareCardsNode.active = false;\r\n        this.teShuPaiNode.active = false;\r\n        this.bulletHoleNode.active = false;\r\n        this.bulletHoleNode.removeAllChildren();\r\n        this.bulletHoleNode.children.forEach(function(node){node.active = false;});\r\n        if(this.shotNode.length > 0) this.shotNode.forEach(function(node){if(node) node.active = false;});\r\n        this.compareCardsNode.getComponent('CompareCards').reset();\r\n        this.compareCardsNode.getComponent('CompareCards').unscheduleAllCallbacks();\r\n    },\r\n\r\n    /*####*/\r\n    reset2: function () {\r\n        this.foldCardNode.active = false;\r\n        this.cardsBackLayout.active = false;\r\n        this.teShuPaiNode.active = false;\r\n        this.bulletHoleNode.active = false;\r\n        this.bulletHoleNode.removeAllChildren();\r\n        this.bulletHoleNode.children.forEach(function(node){node.active = false;});\r\n        if(this.shotNode.length > 0) this.shotNode.forEach(function(node){if(node) node.active = false;});\r\n        //this.compareCardsNode.active = false;\r\n        //this.compareCardsNode.getComponent('CompareCards').reset();\r\n    },\r\n    /*#####*/\r\n\r\n    updateUserInfoWithUsers: function (users) {\r\n        let user = users.find(function (e) {\r\n            return this.userId == e.id;\r\n        }.bind(this));\r\n\r\n        this.updateUserInfo(user);\r\n    },\r\n    showQingli:function(creator, index){\r\n        if(!this.node.active){\r\n            return;\r\n        }\r\n        if(index>0){\r\n            this.userInfoNode.getComponent('userInfo').setqingli(false);\r\n        }else{\r\n            if(creator){\r\n                this.userInfoNode.getComponent('userInfo').setqingli(false);\r\n            }else{\r\n                this.userInfoNode.getComponent('userInfo').setqingli(true);\r\n            }\r\n        }\r\n    },\r\n    updateUserInfo: function (user) {\r\n        this._userInfo = user;\r\n        this.node.active = (user != null);\r\n        this.userInfoNode.active = this.node.active;\r\n        if (!user) {\r\n            return;\r\n        }\r\n\r\n        let userInfo = this.userInfoNode.getComponent('userInfo');\r\n        userInfo.updateAvatar(user.avatarUrl);\r\n        userInfo.updateUserId(user.id);\r\n        userInfo.updateNickname(user.nickname);\r\n        userInfo.setOfflineVisible(!user.onlineStatus);\r\n\r\n        //if (this._deskInfo && this._deskInfo.cIndex > 0) {\r\n        //  if (UserModelHelper.isPlayedCards(user)) {\r\n        //    this.playCard(user.id);\r\n        //    this.compareCardsNode.getComponent('CompareCards').setCompareData(user);\r\n        //  }\r\n        //}\r\n        /**/\r\n        const cIndex = this._deskInfo.cIndex;\r\n        if (this._deskInfo && cIndex > 0 && (this.playedCompareCardsIndexs.indexOf(cIndex) == -1)) {\r\n            if (UserModelHelper.isPlayedCards(user)) {\r\n                this.playCard(user.id,user.cardInfo);\r\n                this.compareCardsNode.getComponent('CompareCards').setCompareData(user);\r\n            }\r\n        }\r\n        /**/\r\n    },\r\n\r\n    // 更新房主信息\r\n    updateBanker: function() {\r\n        let userInfoComp = this.userInfoNode.getComponent('userInfo');\r\n        if (!this._userInfo) {\r\n            userInfoComp.setIsBanker(false);\r\n            return;\r\n        }\r\n\r\n        let isBanker = this._userInfo ? this._userInfo.isBanker : false;\r\n        userInfoComp.setIsBanker(isBanker);\r\n    },\r\n\r\n    showFangZhuStatus: function (createId, visible = true) {\r\n        if (!this.node.active) {\r\n            return;\r\n        }\r\n        if (this._userInfo.id == createId) {\r\n            this.userInfoNode.getComponent('userInfo').setFangZhuNodeVisible(visible);\r\n        }\r\n    },\r\n\r\n    /**\r\n     * 更新分数\r\n     *\r\n     * @param {Number} score 用户分数、可选\r\n     */\r\n    updateScore: function(score) {\r\n        if (!score && this._userInfo) {\r\n            score = this._userInfo.totalScore;\r\n        }\r\n\r\n        let userInfo = this.userInfoNode.getComponent('userInfo');\r\n        userInfo.updateScore(score);\r\n    },\r\n\r\n    showReadyStatus: function (userId, visible = true) {\r\n        if (!this.node.active) {\r\n            return;\r\n        }\r\n\r\n        if (this._userInfo.id == userId) {\r\n            this.userInfoNode.getComponent('userInfo').setReadyNodeVisible(visible);\r\n        }\r\n    },\r\n    showBeilv:function(userId,bl){\r\n        if(!this.node.active){\r\n            return;\r\n        }\r\n        if( this._userInfo.id == userId ){\r\n             this.userInfoNode.getComponent('userInfo').setBeilvLabel(bl);\r\n        }\r\n    },\r\n    /*setDeskInfo: function (deskInfo) {\r\n     this._deskInfo = deskInfo;\r\n     },*/\r\n    updateDeskInfo: function (deskInfo) {\r\n        this._deskInfo = deskInfo;\r\n\r\n        if (deskInfo && !deskInfo.isCBegin) {\r\n            this.reset();\r\n        }\r\n    },\r\n    /**/\r\n\r\n    hideReadyStatus: function () {\r\n        this.userInfoNode.getComponent('userInfo').setReadyNodeVisible(false);\r\n    },\r\n\r\n    playFaPaiAnimation: function () {\r\n        if (!this.node.active) {\r\n            return;\r\n        }\r\n        if (UserModelHelper.isPlayedCards(this._userInfo)) {\r\n            return;\r\n        }\r\n        let cardsBack = this.cardsBackLayout.getComponent('cardsBack');\r\n        cardsBack.showPlayCardBacks();\r\n    },\r\n\r\n    shouldShowFaPaiAnimation: function () {\r\n        return UserModelHelper.isPlayedCards(this._userInfo);\r\n    },\r\n\r\n    setUserOnlineStatus: function (userId, status = 1) {\r\n        if (userId != this.userId) {\r\n            return;\r\n        }\r\n\r\n        let userInfo = this.userInfoNode.getComponent('userInfo');\r\n        userInfo.setOfflineVisible(status != 1);\r\n    },\r\n\r\n    showChatText: function (userId, message) {\r\n        if (userId != this.userId) {\r\n            return;\r\n        }\r\n\r\n        let chatMessage = this.chatMessageNode.getComponent('ChatMessage');\r\n        chatMessage.setString(message);\r\n    },\r\n\r\n    // 用户已经出牌，处于三堆盖着牌的状态\r\n    playCard: function (userId,cardInfo) {\r\n        if (this.userId != userId) {\r\n            return;\r\n        }\r\n\r\n        this.cardsBackLayout.node.active = false;\r\n        this.compareCardsNode.active = false;\r\n        this.foldCardNode.targetOff(this.foldCardNode);\r\n        this.foldCardNode.active = true;\r\n        this.foldCardNode.children.slice(0,3).forEach(function(node){\r\n            node.active = true;\r\n            node.children.forEach(function(noe){\r\n                noe.active = true;\r\n\r\n                var cardSprite = noe.getComponent('cc.Sprite');\r\n\r\n                var path = 'public-pic-card-poker-back';\r\n\r\n                this._loadCardFrame(this.cardSpriteAtlas, path ,cardSprite);\r\n\r\n            }.bind(this));\r\n        }.bind(this));\r\n        this.foldCardNode.on(cc.Node.EventType.TOUCH_END, function (event) {\r\n            this._clickFoldCardNode(event);\r\n        }.bind(this),this.foldCardNode);\r\n\r\n\r\n    },\r\n\r\n    _clickFoldCardNode: function (event) {\r\n\r\n        if (this.userId != Socket.instance.userInfo.id) return;\r\n\r\n        var cardInfo = this._userInfo.cardInfo.length == 1? this._userInfo.cardInfo[0].cards: this._userInfo.cardInfo;\r\n\r\n        var cards = cardInfo.map(function (cardInfoItem) {\r\n\r\n            if(this._userInfo.cardInfo.length == 1) return KQCard.cardsFromArray(cardInfoItem);\r\n\r\n            return KQCard.cardsFromArray(cardInfoItem.cards);\r\n\r\n        }.bind(this)).reduce(function (array, subCards) {return array.concat(subCards);}, []);\r\n\r\n        var foldCardNode = this.foldCardNode.children.slice(0,3);\r\n\r\n        var nodes = foldCardNode.map(function (node) {return node.children;}).reduce(function (array, sub) {return array.concat(sub);}, []);\r\n\r\n        cards.forEach(function (kqCard, index) {\r\n\r\n            if (index >= nodes.length) return;\r\n\r\n            nodes[index].removeAllChildren();\r\n\r\n            nodes[index].getComponent(cc.Sprite).spriteFrame = \"\";\r\n\r\n            var nodds1 = new cc.Node(); //创建一个节点对象\r\n\r\n            nodds1.width = nodes[0].width;\r\n\r\n            nodds1.height = nodes[0].height;\r\n\r\n            nodds1.addComponent(cc.Sprite); //添加精灵组件\r\n\r\n            var cardSprite = nodds1.getComponent('cc.Sprite');\r\n\r\n            cardSprite.sizeMode = 0;\r\n\r\n            var cardName = this.foldCardNodeBack == false? kqCard.cardName(): \"back\";\r\n\r\n            nodds1.cardName = cardName;\r\n\r\n            var path = 'public-pic-card-poker-'+ cardName;\r\n\r\n            this._loadCardFrame(this.cardSpriteAtlas, path ,cardSprite);\r\n\r\n            if(cc.maPai == cardName){\r\n\r\n                var nodds = new cc.Node(); //创建一个节点对象\r\n\r\n                nodds.addComponent(cc.Sprite); //添加精灵组件\r\n\r\n                cc.loader.loadRes('play/desk/img_red5_1', cc.SpriteFrame, function (err, spriteFrame) {\r\n\r\n                    if (err) {cc.error(err.message || err);return;}\r\n\r\n                    var btnSprite1 = nodds.getComponent(cc.Sprite);\r\n\r\n                    btnSprite1.spriteFrame = spriteFrame;\r\n\r\n                    btnSprite1.node.width = cardSprite.node.width + 10;\r\n\r\n                    btnSprite1.node.height = cardSprite.node.height + 10;\r\n\r\n                }.bind(this));\r\n\r\n                cardSprite.node.addChild(nodds);\r\n\r\n            }\r\n\r\n            nodes[index].addChild(nodds1);\r\n        }.bind(this));\r\n\r\n        var cards0 = cards.slice(0,3)\r\n        var cards1 = cards.slice(3,8)\r\n        var cards2 = cards.slice(8,13)\r\n\r\n        cards = [cards0, cards1, cards2]\r\n        //头道\r\n        let typeName0 = KQCard.cardsType(cards0)+1;\r\n        typeName0 = typeName0>=10 ? typeName0 :\"0\"+typeName0;\r\n        typeName0 = typeName0=='04' ? '11' :typeName0;\r\n\r\n        //中道\r\n        let typeName1 = KQCard.cardsType(cards1)+1;\r\n        typeName1 = typeName1>=10 ? typeName1 :\"0\"+typeName1;\r\n        typeName1 = typeName1=='07' ? '22' :typeName1;\r\n\r\n        //尾道\r\n        let typeName2 = KQCard.cardsType(cards2)+1;\r\n        typeName2 = typeName2>=10 ? typeName2 :\"0\"+typeName2;\r\n\r\n\r\n        if(typeName0) KQCard._setGuiCard(0, 0, 3, typeName0, cards, nodes, this.cardSpriteAtlas);\r\n        if(typeName1) KQCard._setGuiCard(1, 3, 8, typeName1, cards, nodes, this.cardSpriteAtlas);\r\n        if(typeName2) KQCard._setGuiCard(2, 8, 13, typeName2, cards, nodes, this.cardSpriteAtlas);\r\n        if(this.foldCardNodeBack == false){\r\n            this.foldCardNodeBack = true;\r\n        }\r\n        else if(this.foldCardNodeBack == true){\r\n            this.foldCardNodeBack = false;\r\n        }\r\n\r\n    },\r\n\r\n    _loadCardFrame: function(SpriteFrame, path, SpritesNode, w, h) {\r\n\r\n        var Sprite = SpriteFrame.getSpriteFrame( path );\r\n\r\n        SpritesNode.spriteFrame = Sprite;\r\n\r\n        if(w) SpritesNode.node.width = w;\r\n\r\n        if(h) SpritesNode.node.height = h;\r\n    },\r\n\r\n    // 准备好开始比牌\r\n    // readyToCompareCards: function () {\r\n    //     this.foldCardNode.targetOff(this.foldCardNode);\r\n    //     this.foldCardNodeBack = true;\r\n    //     this._clickFoldCardNode();\r\n    //     this.cardsBackLayout.node.active = false;\r\n    //     this.compareCardsNode.active = true;\r\n    //     //this.foldCardNode.active = false;\r\n    //     if(this.compareCardsNode.getComponent('CompareCards')._user){\r\n    //         if(this.compareCardsNode.getComponent('CompareCards')._user.isContainExtra){\r\n    //             this.teShuPaiNode.active = true;\r\n    //         }else{\r\n    //             this.teShuPaiNode.active = false;\r\n    //         }\r\n    //     }\r\n    // },\r\n    readyToCompareCards: function () {\r\n        this.foldCardNode.targetOff(this.foldCardNode);\r\n        this.foldCardNodeBack = true;\r\n        this._clickFoldCardNode();\r\n        this.cardsBackLayout.node.active = false;\r\n        this.compareCardsNode.active = true;\r\n        this.foldCardNode.active = true;\r\n        if(this.compareCardsNode.getComponent('CompareCards')._user){\r\n            if(this.compareCardsNode.getComponent('CompareCards')._user.isContainExtra){\r\n                this.teShuPaiNode.active = true;\r\n            }else{\r\n                this.teShuPaiNode.active = false;\r\n            }\r\n        }\r\n    },\r\n\r\n    // 播放打枪动画\r\n    // @param userId   要主动打枪的用户id\r\n    // @param toUserIndex  挨枪的用户的 index\r\n    playShootAnimation: function (userId, toUserIndex) {\r\n        if (userId != this.userId) {\r\n            return;\r\n        }\r\n        var shotNode = this.shotNode[toUserIndex];\r\n        shotNode.active = true;\r\n        shotNode.children[0].active = true;\r\n        shotNode.children[1].active = true;\r\n\r\n        //枪\r\n        var rotateBy = cc.rotateTo(0.1,-15);\r\n        var delay1 = cc.delayTime(0.1);\r\n        var rotateBy1 = cc.rotateTo(0.1,0);\r\n        var start_func1 = cc.callFunc(function(){shotNode.children[0].active = true;});\r\n        var end_func1 = cc.callFunc(function(){shotNode.children[0].active = false;});\r\n        var action = cc.repeat(cc.sequence(start_func1 ,rotateBy, delay1, rotateBy1, end_func1),3);\r\n\r\n        //烟\r\n        var fadeIn = cc.fadeIn (0);\r\n        var scaleTo1 = cc.scaleTo (0, 0.8);\r\n        var scaleTo2 = cc.scaleTo (0.08, 1);\r\n        var fadeOutAndScaleTo = cc.spawn(cc.fadeOut(0.02), cc.scaleTo(0.02, 0.5));\r\n        var delay2 = cc.delayTime(.2);\r\n        var start_func2 = cc.callFunc(function(){shotNode.children[1].active = true;});\r\n        var end_func2 = cc.callFunc(function(){shotNode.children[1].active = false;});\r\n        var action1 =  cc.repeat(cc.sequence(start_func2, fadeIn, scaleTo1, scaleTo2, fadeOutAndScaleTo, delay2, end_func2),3);\r\n\r\n        shotNode.children[0].runAction(action);\r\n        shotNode.children[1].runAction(action1);\r\n\r\n\r\n        //let userInfo = this.userInfoNode.getComponent('userInfo');\r\n        //userInfo.playShootAnimation(toUserIndex);\r\n    },\r\n\r\n    // 播放中枪动画\r\n    playBulletHoleAnimation: function (userId) {\r\n        if (userId != this.userId) {\r\n            return;\r\n        }\r\n\r\n        this.bulletHoleNode.active = true;\r\n\r\n        let bulletHoleNode = cc.instantiate(this.bulletHolePrefab);\r\n\r\n        bulletHoleNode.children.forEach(function(node){node.active = false;}.bind(this));\r\n\r\n        bulletHoleNode.children[0].y = 0;\r\n\r\n        this.bulletHoleNode.addChild(bulletHoleNode);\r\n\r\n        var interval = 0.3;\r\n\r\n        var initTime = 0;\r\n\r\n        bulletHoleNode.children.forEach(function(node){\r\n\r\n            this.scheduleOnce(function() {\r\n\r\n                AudioManager.instance.playHumanZQiang();\r\n\r\n                node.active = true;\r\n\r\n                var y = Math.round(Math.random()) == 0 ? -1 : 1;\r\n\r\n                y = Math.floor(Math.random()*38) * y;\r\n\r\n                var x = Math.round(Math.random()) == 0 ? -1 : 1;\r\n\r\n                x = Math.floor(Math.random()*38) * x;\r\n\r\n                node.x = x;\r\n\r\n                node.y = y;\r\n\r\n            }, initTime);\r\n\r\n            initTime = initTime + interval;\r\n\r\n        }.bind(this));\r\n\r\n    },\r\n\r\n    // 播放全垒打动画\r\n    playHomeRunAimation: function (userId) {\r\n        if (userId != this.userId) {\r\n            return;\r\n        }\r\n\r\n        let userInfo = this.userInfoNode.getComponent('userInfo');\r\n        userInfo.playHomeRunAimation();\r\n    },\r\n\r\n    playSpeakAnimation: function (userId) {\r\n        if (userId != this.userId) {\r\n            return;\r\n        }\r\n\r\n        let userInfo = this.userInfoNode.getComponent('userInfo');\r\n        userInfo.playSpeakAnimation();\r\n    },\r\n\r\n    nextCompareScore: function () {\r\n        if (!this.node.active) {\r\n            return 0;\r\n        }\r\n\r\n        let score = this.compareCardsNode.getComponent('CompareCards').nextCompareScore();\r\n        return score;\r\n    },\r\n\r\n    showNextCompareCards: function () {\r\n        if (this.nextCompareScore() <= 0) {\r\n            return;\r\n        }\r\n        this.teShuPaiNode.active = false;\r\n        this.compareCardsNode.getComponent('CompareCards').showNextCards();\r\n    },\r\n\r\n    showAllCompareCards: function (users) {\r\n        let user = users.find(function (e) {\r\n            return this.userId == e.id;\r\n        }.bind(this));\r\n        this.compareCardsNode.getComponent('CompareCards').setCompareData(user);\r\n        this.compareCardsNode.getComponent('CompareCards').showAllCards();\r\n\r\n        this.updateScore(this._userInfo.totalScore || 0);\r\n    },\r\n\r\n    showNextCompareScore: function (isContainExtra) {\r\n        this.compareCardsNode.getComponent('CompareCards').showNextCompareScore(isContainExtra);\r\n    },\r\n\r\n    showScoreResult: function () {\r\n        this.compareCardsNode.getComponent('CompareCards').showScoreResult();\r\n    },\r\n});\r\n"
  ]
}