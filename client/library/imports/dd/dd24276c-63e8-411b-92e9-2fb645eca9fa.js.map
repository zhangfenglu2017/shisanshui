{
  "version": 3,
  "sources": [
    "unknown"
  ],
  "names": [],
  "mappings": "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",
  "file": "unknown",
  "sourcesContent": [
    "const Socket = require('socket');\nconst ChatMessage = require('ChatMessage');\nconst AudioManager = require('AudioManager');\n\n// 用来发送消息的 component\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        //bqNode:cc.Node,\n        //bqNode1:cc.Node,\n        //btnLanguageNode:cc.Node,\n        //btnLanguageNode1:cc.Node,\n        //btnChartNode:cc.Node,\n        //btnChartNode1:cc.Node,\n        textScrollView:cc.Node,\n        imageContentNode:cc.Node,\n\n        editBox: cc.EditBox,\n\n        textRecordScrollView: cc.ScrollView,\n        textRecordLayout: cc.Layout,\n\n        textPrefab:cc.Prefab,\n        chatTextRecordPrefab: cc.Prefab,\n        emojiPrefab:cc.Prefab,\n        // imagePrefab:cc.Prefab,\n\n        biaoqing: [cc.Node],    // [亮的背景, 暗的背景]   快捷语\n        kuaijieyu: [cc.Node],   // [亮的背景, 暗的背景]   表情\n        content:[cc.Node],      // [快捷语, 表情]   \n        inputNode:cc.Node,\n        emoji:[cc.Node],\n        _userId: null,\n\n        _playerInfos: null,        // 记录用户信息\n        _chatTextMessageRecords: null, // 聊天文本消息记录\n    },\n\n    // use this for initialization\n    onLoad: function () {\n        this._userId = Socket.instance.userInfo.id;\n        this._playerInfos = [];\n        this.textContent = this.textScrollView.getComponent(cc.ScrollView).content;\n        // this.imageContent = this.imageScrollView.getComponent(cc.ScrollView).content;\n        var self = this;\n        var textData = AudioManager.instance.chatTexts();\n        for (var i = 0; i < textData.length; i++) {\n            var item = cc.instantiate(this.textPrefab);\n            item.getComponent('cellText').setText(textData[i]);\n            item.getComponent('cellText').onSelectAction = function(text) {\n                self.onTextClickAction(text);\n            };\n            this.textContent.h = 1000;\n            this.textContent.addChild(item);\n        }\n\n    },\n\n\n    clickKuaiJieYu :function(){\n        this.kuaijieyu[0].active = true;    // 快捷语 背景\n        this.kuaijieyu[1].active = false;   // 快捷语 按钮\n        this.biaoqing[0].active = false;    // 背景表情\n        this.biaoqing[1].active = true;     // 表情按钮\n        this.content[0].active = true;\n        this.content[1].active = false;\n    },\n    clickBiaoQing :function(){\n        this.biaoqing[0].active = true;     // 背景表情\n        this.biaoqing[1].active = false;    // 表情按钮\n        this.kuaijieyu[0].active = false;   // 快捷语 背景\n        this.kuaijieyu[1].active = true ;   // 快捷语 按钮\n        this.content[0].active = false;\n        this.content[1].active = true;\n    },\n    onTextClickAction:function(text = \"\") {\n        this.editBox.string = \"\";\n        this.sendText(text);\n    },\n\n    clickEmoji: function (event, emojiName) {\n        let string = this.editBox.string;\n        this.editBox.string = string + \"<\" + emojiName + \">\";\n        this.sendEmoji(emojiName);\n    },\n\n    clickSend: function () {\n        let string = this.editBox.string || \"\";\n        if (string.length == 0) {\n            return;\n        }\n        this.editBox.string = \"\";\n        this.sendText(string);\n    },\n\n    sendEmoji :function(emojiName){\n        if(emojiName.length ==0){\n            return\n        }\n        Socket.sendEmoji(this._userId, emojiName);\n        this.dismiss();\n    },\n\n    sendText: function (text = \"\") {\n        if (text.length == 0) {\n            return;\n        }\n        Socket.sendText(this._userId, text);\n        this.dismiss();\n    },\n\n    dismiss: function () {\n        this.node.active = false;\n    },\n\n    bqAction:function() {\n        this.bqNode1.active = this.btnLanguageNode.active = this.btnChartNode1.active = true;\n        this.bqNode.active = this.btnLanguageNode1.active = this.btnChartNode.active = false;\n        this.textScrollView.active = false;\n        this.imageContentNode.active = true;\n        this.textRecordScrollView.node.active = false;\n    },\n\n    textAction:function() {\n        this.bqNode1.active = this.btnLanguageNode.active = this.btnChartNode.active = false;\n        this.bqNode.active = this.btnLanguageNode1.active = this.btnChartNode1.active = true;\n        this.textScrollView.active = true;\n        this.imageContentNode.active = false;\n        this.textRecordScrollView.node.active = false;\n    },\n\n    chartAction:function() {\n        this.bqNode1.active = this.btnLanguageNode1.active = this.btnChartNode1.active = false;\n        this.bqNode.active = this.btnLanguageNode.active = this.btnChartNode.active = true;\n        this.textScrollView.active = this.imageContentNode.active = false;\n        this.textRecordScrollView.node.active = true;\n    },\n\n    addPlayerInfos: function (playerInfos) {\n        this._playerInfos = this._playerInfos || [];\n\n        playerInfos.forEach(function (userInfo) {\n            let haveUserInfo = this._playerInfos.find(function (ownUserInfo) {\n                return ownUserInfo.id == userInfo.id;\n            });\n\n            if (haveUserInfo == null) {\n                this._playerInfos.push(userInfo);\n            }\n        }.bind(this));\n    },\n\n    addChatTextMessage: function (userId, text) {\n        this._playerInfos = this._playerInfos || [];\n\n        var nickname = \"[ID:\" + userId + \"说]：\";\n        let userInfo = this._playerInfos.find(function (userInfo) {\n            return userInfo.id == userId;\n        });\n\n        if (userInfo) {\n            nickname = \"[\" + userInfo.nickname + \"说]：\";\n        }\n\n        var str = nickname + text;\n        str = ChatMessage.parseString(str);\n        this._addChatTextToRecord(str);\n    },\n\n    addChatEmojiMessage:function(userId,emoji){\n        this._playerInfos = this._playerInfos || [];\n\n        var nickname = \"[ID:\" + userId + \"说]：\";\n        let userInfo = this._playerInfos.find(function (userInfo) {\n            return userInfo.id == userId;\n        });\n        if (userInfo) {\n            nickname = \"[\" + userInfo.nickname + \"说]：\";\n        };\n        var str = nickname + emoji;\n        str = ChatMessage.parseString(str);\n        this._addChatEmojiToRecord(emoji);\n        // cc.log(emoji)\n        // cc.log('---190')\n    },\n\n    _addChatEmojiToRecord:function(emoji){\n        var self = this;\n        this._loadEmojiFrame(emoji,function(frame){\n            //var item  = cc.instantiate(self.emojiPrefab);\n            //cc.log(frame)\n            //var btnSprites =  item.getComponent(cc.Sprite);\n            //btnSprites.spriteFrame = frame;\n            //let chatEmojiRecord = item.getComponent('ChatTextRecord');\n            //chatEmojiRecord.setEmoji(frame);\n            ChatMessage.setEmoji(frame);\n\n        })\n    },\n\n    _loadEmojiFrame :function(Emojiname ,callback){\n        cc.loader.loadRes(\"/textures/chat/bq\", cc.SpriteAtlas, function (err, atlas) {\n            if(err){\n                //console.log(null, err)\n                return;\n            }\n            var frame = atlas.getSpriteFrame(Emojiname);\n            callback(frame);\n        }.bind(this))\n\n    },\n\n    _addChatTextToRecord: function (text) {\n        var item = cc.instantiate(this.chatTextRecordPrefab);\n        let chatTextRecord = item.getComponent('ChatTextRecord');\n        chatTextRecord.setString(text);\n\n        this.textRecordLayout.node.addChild(item);\n        this.textRecordScrollView.scrollToBottom();\n    },\n});\n"
  ]
}